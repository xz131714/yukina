---
title: "ğŸš€ Sqoopçš„å¯¼å…¥å¯¼å‡º"
description: "Sqoopçš„å¯¼å…¥å¯¼å‡ºå‘½ä»¤çš„åŸºæœ¬ä½¿ç”¨æ–¹æ³•"
published: 2025-06-15
cover: https://img.xiaozhangya.xin/file/post/dMJzBgHY.png
category: "Documentation"
tags:
  - Sqoop
  - æ•°æ®åŒæ­¥
---

## ğŸ” ä¸€ã€å…¨é‡å¯¼å…¥ï¼ˆImportï¼‰

### 1. å¯¼å…¥ MySQL è¡¨åˆ° HDFS

```bash
sqoop import \
--connect jdbc:mysql://localhost:3306/testdb \     # MySQL JDBCè¿æ¥
--username root \                                  # ç”¨æˆ·å
--password root \                                  # å¯†ç 
--table emp \                                      # è¦å¯¼å…¥çš„MySQLè¡¨å
--target-dir /user/hadoop/emp \                    # æ•°æ®å¯¼å…¥åˆ°çš„HDFSç›®å½•
--delete-target-dir \                              # åˆ é™¤åŸæœ‰ç›®å½•ï¼ˆé˜²æ­¢é‡å¤ï¼‰
--fields-terminated-by '\t' \                      # æŒ‡å®šå­—æ®µåˆ†éš”ç¬¦ä¸ºtab
--num-mappers 1                                    # ä½¿ç”¨ä¸€ä¸ªMapä»»åŠ¡ï¼ˆæ–¹ä¾¿æŸ¥çœ‹ï¼‰
```

------

### 2. å¯¼å…¥ MySQL è¡¨åˆ° Hive è¡¨ä¸­

```bash
sqoop import \
--connect jdbc:mysql://localhost:3306/testdb \     # è¿æ¥MySQLæ•°æ®åº“
--username root \                                  # ç”¨æˆ·å
--password root \                                  # å¯†ç 
--table emp \                                      # è¡¨å
--hive-import \                                    # å¯¼å…¥åˆ°Hiveä¸­
--hive-table emp_hive \                            # æŒ‡å®šHiveè¡¨å
--fields-terminated-by '\t' \                      # å­—æ®µåˆ†éš”ç¬¦
--num-mappers 1                                    # ä¸€ä¸ªMapä»»åŠ¡
```

------

## ğŸ”„ äºŒã€å¢é‡å¯¼å…¥ï¼ˆIncremental Importï¼‰

### 1. æ¨¡å¼ä¸€ï¼šè¿½åŠ æ¨¡å¼ï¼ˆappendï¼‰æŒ‰IDå¯¼å…¥æ–°æ•°æ®

```bash
sqoop import \
--connect jdbc:mysql://localhost:3306/testdb \     # MySQLè¿æ¥
--username root \                                  # ç”¨æˆ·å
--password root \                                  # å¯†ç 
--table emp \                                      # è¡¨å
--incremental append \                             # ä½¿ç”¨è¿½åŠ æ¨¡å¼
--check-column id \                                # æ£€æŸ¥idå­—æ®µçš„å€¼
--last-value 1000 \                                # ä¸Šæ¬¡æœ€å¤§idï¼Œå¯¼å…¥id > 1000çš„æ•°æ®
--target-dir /user/hadoop/emp_increment \          # HDFSç›®æ ‡è·¯å¾„
--fields-terminated-by '\t' \                      # å­—æ®µåˆ†éš”ç¬¦
--num-mappers 1                                    # Mapä»»åŠ¡æ•°é‡
```

------

### 2. æ¨¡å¼äºŒï¼šæŒ‰æ›´æ–°æ—¶é—´ï¼ˆlastmodifiedï¼‰

```bash
sqoop import \
--connect jdbc:mysql://localhost:3306/testdb \     # MySQLè¿æ¥
--username root \                                  # ç”¨æˆ·å
--password root \                                  # å¯†ç 
--table emp \                                      # è¡¨å
--incremental lastmodified \                       # ä½¿ç”¨lastmodifiedæ¨¡å¼
--check-column last_updated \                      # æ£€æŸ¥æ›´æ–°æ—¶é—´å­—æ®µ
--last-value "2024-01-01 00:00:00" \               # ä¸Šæ¬¡å¯¼å…¥æ—¶é—´
--target-dir /user/hadoop/emp_updated \            # HDFSè·¯å¾„
--fields-terminated-by '\t' \                      # å­—æ®µåˆ†éš”ç¬¦
--num-mappers 1                                    # Mapä»»åŠ¡æ•°é‡
```

------

## ğŸ”ƒ ä¸‰ã€å¯¼å‡ºï¼ˆExportï¼‰ä» HDFS åˆ° MySQL

```bash
sqoop export \
--connect jdbc:mysql://localhost:3306/testdb \     # ç›®æ ‡MySQLæ•°æ®åº“
--username root \                                  # ç”¨æˆ·å
--password root \                                  # å¯†ç 
--table emp_backup \                               # è¦å¯¼å‡ºçš„MySQLè¡¨
--export-dir /user/hadoop/emp \                    # HDFSä¸­æºæ•°æ®è·¯å¾„
--fields-terminated-by '\t' \                      # å­—æ®µåˆ†éš”ç¬¦è¦å’Œå¯¼å…¥æ—¶ä¸€è‡´
--num-mappers 1                                    # ä½¿ç”¨ä¸€ä¸ªMapä»»åŠ¡å¯¼å‡º
```

------

## ğŸ“Œ é™„åŠ è¯´æ˜


| å‚æ•°                                     | ä¸­æ–‡è¯´æ˜                                                     |
| ---------------------------------------- | ------------------------------------------------------------ |
| `--connect`                              | æŒ‡å®šæ•°æ®åº“ JDBC è¿æ¥å­—ç¬¦ä¸²ï¼ˆä¾‹å¦‚ MySQLï¼‰                     |
| `--username`                             | æ•°æ®åº“ç”¨æˆ·å                                                 |
| `--password`                             | æ•°æ®åº“å¯†ç ï¼ˆå»ºè®®æ”¹ä¸º --password-file ä»¥æå‡å®‰å…¨ï¼‰            |
| `--password-file`                        | ä»æœ¬åœ°æ–‡ä»¶è¯»å–å¯†ç                                            |
| `--table`                                | è¦å¯¼å…¥æˆ–å¯¼å‡ºçš„æ•°æ®åº“è¡¨å                                     |
| `--target-dir`                           | æŒ‡å®šå¯¼å…¥æ•°æ®çš„ HDFS ç›®æ ‡ç›®å½•                                 |
| `--delete-target-dir`                    | å¦‚æœç›®æ ‡ç›®å½•å·²å­˜åœ¨ï¼Œåˆ™å…ˆåˆ é™¤å®ƒ                               |
| `--fields-terminated-by`                 | è®¾ç½®å­—æ®µä¹‹é—´çš„åˆ†éš”ç¬¦ï¼Œå¸¸ç”¨ `'\t'`ï¼ˆåˆ¶è¡¨ç¬¦ï¼‰                  |
| `--num-mappers`                          | è®¾ç½®å¹¶è¡Œæ‰§è¡Œ Map ä»»åŠ¡æ•°ï¼ˆé»˜è®¤4ï¼‰                             |
| `--split-by`                             | ç”¨äº Map ä»»åŠ¡å¹¶å‘åˆ‡åˆ†çš„å­—æ®µåï¼Œé€šå¸¸ä¸ºä¸»é”®                    |
| `--hive-import`                          | å¯¼å…¥æ•°æ®åè‡ªåŠ¨å°†å…¶åŠ è½½åˆ° Hive è¡¨ä¸­                           |
| `--hive-table`                           | æŒ‡å®š Hive ä¸­çš„ç›®æ ‡è¡¨å                                       |
| `--incremental`                          | å¢é‡å¯¼å…¥æ¨¡å¼ï¼š`append`ï¼ˆè¿½åŠ ï¼‰æˆ– `lastmodified`ï¼ˆæŒ‰æ›´æ–°æ—¶é—´ï¼‰ |
| `--check-column`                         | å¢é‡å¯¼å…¥æ—¶ç”¨äºåˆ¤æ–­æ–°å¢æ•°æ®çš„åˆ—åï¼ˆå¦‚ `id` æˆ– `last_updated`ï¼‰ |
| `--last-value`                           | æŒ‡å®šä¸Šæ¬¡å¯¼å…¥çš„æœ€å¤§IDæˆ–æœ€è¿‘æ›´æ–°æ—¶é—´                           |
| `--columns`                              | æŒ‡å®šå¯¼å…¥/å¯¼å‡ºçš„å­—æ®µå­é›†ï¼Œä½¿ç”¨é€—å·åˆ†éš”                        |
| `--where`                                | è‡ªå®šä¹‰SQLæŸ¥è¯¢æ¡ä»¶                                            |
| `--export-dir`                           | HDFSä¸­è¦å¯¼å‡ºæ•°æ®çš„ç›®å½•è·¯å¾„                                   |
| `--as-textfile`                          | æŒ‡å®šæ•°æ®ä»¥æ–‡æœ¬æ ¼å¼ä¿å­˜ï¼ˆé»˜è®¤ï¼‰                               |
| `--compress`                             | å¯ç”¨å‹ç¼©                                                     |
| `--compression-codec`                    | å‹ç¼©ç±»å‹ï¼ˆå¦‚ `org.apache.hadoop.io.compress.GzipCodec`ï¼‰     |
| `--map-column-java`                      | æŒ‡å®šå­—æ®µä¸ Java ç±»å‹çš„æ˜ å°„                                   |
| `--driver`                               | æŒ‡å®šæ•°æ®åº“çš„ JDBC é©±åŠ¨ç±»ï¼ˆå¦‚é MySQLï¼‰                       |


------

